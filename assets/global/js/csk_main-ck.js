var cskMain={Global:{init:function(){var e=this;this.oDatePicker();this.oPrettySelect();this.oNiceScrollbar();this.oMessageBtn();this.oInputNumber();this.oCheckboxDropdown();this.oMenuDraggable();this.searchstopPropagation();this.validateForm();this.avatarUpload();this.ckEditorCustomButton()},validateForm:function(){$("form").validationEngine("attach",{relative:!0,overflownDIV:"#divOverflown",promptPosition:"bottomLeft"})},ckEditorCustomButton:function(){if($("#CKEditorFull").length){var e=CKEDITOR.replaceClass="CKEditorFull",t=CKEDITOR.instances[e];t&&t.destroy(!0);CKEDITOR.replace(e,{extraPlugins:"media",toolbar:[["NumberedList","BulletedList","-","Link","Unlink"],["Maximize","About","ShowBlocks","-","-","Media"],["Source","-","Save","NewPage","DocProps","Preview","Print","-","Templates"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"],["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"],["Styles","Format","Font","FontSize"],["TextColor","BGColor"]]})}if($("#CKEditorBasic").length){var n=CKEDITOR.replaceClass="CKEditorBasic",r=CKEDITOR.instances[n];r&&r.destroy(!0);CKEDITOR.replace(n,{extraPlugins:"media",toolbar:[["Media","Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About","-","Image"]]})}if($("#CKEditorLimit").length){var n=CKEDITOR.replaceClass="CKEditorLimit";CKEDITOR.replace(n,{toolbar:[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About","-","Image"]]})}},avatarUpload:function(){},oPrettySelect:function(){var e=$(".selectpicker--no-result"),t=$(".selectpicker--country");e.length!=0&&e.select2({minimumResultsForSearch:-1});t.length!=0&&t.select2({allowClear:!0,placeholder:"- Select Country -"});var n=$(".selectpicker");n.length!=0&&n.select2({minimumResultsForSearch:-1})},searchstopPropagation:function(){$(".search--pretty .form-control").on("click",function(e){$(this).addClass("form-control--pushed");var t=$(this);$(".profile").one("mouseup",function(){return!1});$(document).one("mouseup",function(){t.removeClass("form-control--pushed")})})},oNiceScrollbar:function(){$("#post-scroller").niceScroll({styler:"fb",cursorcolor:"rgba(0,0,0,0.2)",cursorwidth:"4",cursorborderradius:"10px",cursorborder:"",zindex:"1000",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1});$(".modal").niceScroll({autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1});$("html, .modal").niceScroll({styler:"fb",cursorcolor:"#638694 ",cursorwidth:"6",cursorborderradius:"10px",background:"#d4d4d4",cursorborder:"",zindex:"1000",spacebarenabled:!1,enablekeyboard:!1,autohidemode:!1});$(".timeline-messages-listing, .list-group--scroll").niceScroll({styler:"fb",cursorcolor:"#95bce4 ",cursorwidth:"7",cursorborderradius:"10px",cursorborder:"",zindex:"1000",spacebarenabled:!1,enablekeyboard:!1});$(".t-sidebar").niceScroll({styler:"fb",cursorcolor:"rgba(56,83,94,0.3)",cursorwidth:"4",cursorborderradius:"6px",cursorborder:"",zindex:"1015",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1});$(".media-attachments").niceScroll({styler:"fb",cursorcolor:"#d4d4d4",cursorwidth:"6",cursorborderradius:"6px",cursorborder:"",zindex:"2000",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1})},oMessageBtn:function(){$(".btn-message-submit").click(function(){$(this).addClass("disabled");$(".message-submit").show()})},oInputNumber:function(){$(".numbers-row .numbers-sorting-listing").append('<div class="inc number-sorting"><span class="hide">+</span><i class="fa fa-sort-up"></i></div><div class="dec number-sorting"><span class="hide">-</span><i class="fa fa-sort-down"></i></div>');$(".number-sorting").on("click",function(){var e=$(this),t=e.parent().parent().find("input").val();if(e.text()=="+")var n=parseFloat(t)+1;else if(t>0)var n=parseFloat(t)-1;else n=0;e.parent().parent().find("input").val(n)})},oCheckboxDropdown:function(){$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu--extended")&&e.stopPropagation()})},oDatePicker:function(){$("#datepicker-from").datetimepicker({pickTime:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}});$("#datepicker-to").datetimepicker({pickTime:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}});$("#datepicker-from").on("change.dp",function(e){$("#datepicker-to").data("DateTimePicker").setStartDate(e.date)});$("#datepicker-to").on("change.dp",function(e){$("#datepicker-from").data("DateTimePicker").setEndDate(e.date)});$("#datetimepicker-from").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}});$("#datetimepicker-to").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}});$("#datetimepicker-from").on("change.dp",function(e){$("#datetimepicker-to").data("DateTimePicker").setStartDate(e.date)});$("#datetimepicker-to").on("change.dp",function(e){$("#datetimepicker-from").data("DateTimePicker").setEndDate(e.date)});$("#datepicker").datetimepicker({language:"en",pickTime:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}});$(".datetimepicker").datetimepicker({language:"en",pickTime:!0,pick12HourFormat:!0});$("#datetimepicker2").datetimepicker({language:"en",pickTime:!0,pick12HourFormat:!0})},oMenuDraggable:function(){$(".js-menu-remove").click(function(){$(this).parent.parent(".js-menu-item").hide()});$(".js-menu-item").hover(function(){$(this).find(".js-menu-remove").toggleClass("js-menu-remove--ease")})}},Loader:{layOpen:function(e){var t=$(e);if(t.length==0)return;var n=t.position(),r=n.top,i=n.left,s=t.height(),o=t.width(),u=$('<div class="table-overlay"><span class="preloader__brand preloader__brand--fade"></span></div>');t.css({position:"relative"});t.append(u);u.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",left:"0",width:o+"px",height:s+"px","z-index":"999"});$(".preloader__brand").css({"margin-top":s/3+"px !important","margin-left":"auto !important","margin-right":"auto !important"})},layClose:function(){$(".table-overlay").remove()}},AskExpert:{init:function(){this.inbox();this.attachment();this.sendForm();this.pagination();this.addAttachments();this.jsAttachItems()},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$("input.attachment").length-1,t=$("input.attachment:eq(0)").clone();t.val("").insertAfter("input.attachment:eq("+e+")")})},jsAttachItems:function(){$(".js-attached-btn").click(function(){$(".js-attached-items").slideDown("fast")})},pagination:function(){$("body").on("click",".post-carousel-pagination__core > .carousel-control",function(e){e.preventDefault();var t=$("#s"),n=$("#per_page");$.ajax({url:ajaxUrl,type:"GET",dataType:"json",data:{per_page:n.val(),s:t.val(),orderby:$(".desort").data("groupby"),order:$(".desort").data("order"),page:$(this).data("page")},beforeSend:function(){cskMain.Loader.layOpen("#table")},success:function(e){$("#table").replaceWith(e.table);$(".post-carousel-pagination").replaceWith(e.paging);$(".table-overlay").remove()}});return!1})},inbox:function(){$("body").on("click",".item-inbox",function(e){e.preventDefault();var t=$(this).data("id");$(".item-inbox").removeClass("post--active");$(this).addClass("post--active");$.ajax({url:baseURL+"admin/ask-expert/thread",dataType:"json",data:{id:t},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){$(".forum-wrappr").html(e.table);cskMain.Loader.layClose()}});return!1});$(".item-inbox:eq(0)").trigger("click")},attachment:function(){$("body").on("click",".toggle-attachments",function(e){e.preventDefault();var t=$(this),n=t.data("id");if(t.hasClass(":not(.get-attach)")){_attachmnt_list.slideToggle("slow");return!1}$.ajax({url:baseURL+"inbox/attachments",dataType:"json",data:{id:n},success:function(e){$(".attachments-lists").html(e.attachments).show()}});return!1})},sendForm:function(){$("body").on("submit",".askexpert-form",function(e){e.preventDefault();var t=$(this),n=$(".wysiwyg-textarea").code(),r=$('input[name^="_token"]').val(),i=$('input[name^="id"]').val(),s=$('input[name^="recommendations"]').val();$.ajax({url:t.attr("action"),type:"post",dataType:"json",data:{_token:r,message:n,id:i,recommendations:s},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){cskMain.Loader.layClose();$(".post--active").trigger("click")},error:function(e,t,n){console.log(e);console.log(t);console.log(n)}});return!1})},oResponsiveNav:function(){$(".navbar-toggle").click(function(){$(this).toggleClass("navbar-toggle--trigger");$(".t-sidebar").toggleClass("t-sidebar--pushed");$("#ascrail2001").toggleClass("nicescroll-rails--pushed");$("#ascrail2002").toggleClass("nicescroll-rails--pushed");$("#ascrail2003").toggleClass("nicescroll-rails--pushed");return!1})},oNiceScrollbar:function(){$("#post-scroller").niceScroll({styler:"fb",cursorcolor:"rgba(0,0,0,0.2)",cursorwidth:"4",cursorborderradius:"10px",cursorborder:"",zindex:"1000",autohidemode:!1});$(".modal").niceScroll({autohidemode:!1});$("html, .modal").niceScroll({styler:"fb",cursorcolor:"#638694 ",cursorwidth:"6",cursorborderradius:"10px",background:"#d4d4d4",cursorborder:"",zindex:"1000"});$(".timeline-messages-listing, .list-group--scroll").niceScroll({styler:"fb",cursorcolor:"#95bce4 ",cursorwidth:"7",cursorborderradius:"10px",cursorborder:"",zindex:"1000"});$(".t-sidebar").niceScroll({styler:"fb",cursorcolor:"rgba(56,83,94,0.3)",cursorwidth:"4",cursorborderradius:"6px",cursorborder:"",zindex:"1015",autohidemode:!1});$(".media-attachments").niceScroll({styler:"fb",cursorcolor:"#d4d4d4",cursorwidth:"6",cursorborderradius:"6px",cursorborder:"",zindex:"2000",autohidemode:!1})},oMessageBtn:function(){$(".btn-message-submit").click(function(){$(this).addClass("disabled");$(".message-submit").show()})},oInputNumber:function(){$(".numbers-row .numbers-sorting-listing").append('<div class="inc number-sorting"><span class="hide">+</span><i class="fa fa-sort-up"></i></div><div class="dec number-sorting"><span class="hide">-</span><i class="fa fa-sort-down"></i></div>');$(".number-sorting").on("click",function(){var e=$(this),t=e.parent().parent().find("input").val();if(e.text()=="+")var n=parseFloat(t)+1;else if(t>0)var n=parseFloat(t)-1;else n=0;e.parent().parent().find("input").val(n)})},oCheckboxDropdown:function(){$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu--extended")&&e.stopPropagation()})},oMenuDraggable:function(){$(".js-menu-remove").click(function(){$(this).parent.parent(".js-menu-item").hide()});$(".js-menu-item").hover(function(){$(this).find(".js-menu-remove").toggleClass("js-menu-remove--ease")})}},Loader:{layOpen:function(e){var t=$(e);if(t.length==0)return;var n=t.position(),r=n.top,i=n.left,s=t.height(),o=t.width(),u=$('<div class="table-overlay"><span class="preloader__brand preloader__brand--fade"></span></div>');t.append(u);u.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",right:"0",width:o+"px",height:s+"px","z-index":"999"});$(".preloader__brand").css({"margin-top":s/3+"px !important","margin-left":"auto !important","margin-right":"auto !important"})},layClose:function(){$(".table-overlay").remove()}},AskExpert:{init:function(){this.inbox();this.attachment();this.sendForm();this.pagination();this.addAttachments();this.jsAttachItems();this.getFilename();this.removeAttachment()},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$(".attachment-btn").length-1,t=$(".attachment-btn:eq(0)").clone();t.find(".filename").text("");t.find("input").val("");t.insertAfter(".attachment-btn:eq("+e+")")})},getFilename:function(){$("body").on("change",":file",function(){var e=$(this).val();e=e.length>30?e.substring(0,27)+"...":e;$(this).closest("div").find(".filename").html(e)})},removeAttachment:function(){$("body").on("click",".attachment-btn .fa-trash-o",function(e){e.preventDefault();$(".attachment-btn").length-1!=0&&$(this).closest(".attachment-btn").remove()})},jsAttachItems:function(){$(".js-attached-btn").click(function(){$(".js-attached-items").slideDown("fast")})},pagination:function(){$("body").on("click",".post-carousel-pagination__core > .carousel-control",function(e){e.preventDefault();var t=$("#s"),n=$("#per_page");$.ajax({url:ajaxUrl,type:"GET",dataType:"json",data:{per_page:n.val(),s:t.val(),orderby:$(".desort").data("groupby"),order:$(".desort").data("order"),page:$(this).data("page")},beforeSend:function(){cskMain.Loader.layOpen("#table")},success:function(e){$("#table").replaceWith(e.table);$(".post-carousel-pagination").replaceWith(e.paging);$(".table-overlay").remove()}});return!1})},inbox:function(){$("body").on("click",".item-inbox",function(e){e.preventDefault();var t=$(this).data("id");$(".item-inbox").removeClass("post--active");$(this).addClass("post--active");$.ajax({url:baseURL+"ask-expert/thread",dataType:"json",data:{id:t},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){$(".forum-wrappr").html(e.table);cskMain.Loader.layClose()}});return!1});$(".item-inbox:eq(0)").trigger("click")},attachment:function(){$("body").on("click",".toggle-attachments",function(e){e.preventDefault();var t=$(this),n=t.data("id");if(t.hasClass(":not(.get-attach)")){_attachmnt_list.slideToggle("slow");return!1}$.ajax({url:baseURL+"inbox/attachments",dataType:"json",data:{id:n},success:function(e){$(".attachments-lists").html(e.attachments).show()}});return!1})},sendForm:function(){$("body").on("submit",".askexpert-form",function(e){e.preventDefault();var t=$(this);if(t.find(".ckeditor").val()==""){bootbox.alert("Message is required");return}$.ajax({url:t.attr("action"),type:"post",dataType:"json",data:t.serialize(),beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){cskMain.Loader.layClose();$(".post--active").trigger("click")},error:function(e,t,n){console.log(e);console.log(t);console.log(n)}});return!1})}},Product:{init:function(){var e=this,t=$(':input[name^="is_qty_limited"]');t.click(function(){e.manageSaleQty()});e.manageSaleQty()},manageSaleQty:function(){var e=$(':input[name^="is_qty_limited"]'),t=$(':input[name^="min_sale_qty"], :input[name^="max_sale_qty"]');if(e.prop("checked")==0){t.attr("readonly","readonly").val(0);t.closest("div").find(".numbers-sorting-listing").hide()}else{t.removeAttr("readonly");t.closest("div").find(".numbers-sorting-listing").show()}}},Comment:{init:function(){var e=$("#post_id");this.comment();this.getPostComment(e.val())},getPostComment:function(e){cskMain.Loader.layOpen(".timeline-messages-listing");$.get(baseURL+"post/comment/"+e).done(function(e){if(typeof e=="string")$(".timeline-messages").html(e);else try{var t=JSON.parse(e);t.error!="guest"&&$(".timeline-messages").html(e)}catch(n){$(".timeline-messages").html(e)}cskMain.Loader.layClose()})},comment:function(){$("body").on("click","#send-comment",function(){var e=$("#comment"),t=$("#post_id");if(e.val()=="")return;$.post(baseURL+"post/comment",{comment:e.val(),post_id:t.val()},function(n){cskMain.Comment.getPostComment(t.val());e.val("")},"json")})}}};