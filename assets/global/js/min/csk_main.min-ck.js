var cskMain={Global:{init:function(){this.oDatePicker(),this.oPrettySelect(),this.oNiceScrollbar(),this.oMessageBtn(),this.oInputNumber(),this.oCheckboxDropdown(),this.oMenuDraggable(),this.searchstopPropagation()},validateForm:function(){$("form").validationEngine("attach",{relative:!0,overflownDIV:"#divOverflown",promptPosition:"bottomLeft"})},oPrettySelect:function(){var e=$(".selectpicker--no-result"),t=$(".selectpicker--country");0!=e.length&&e.select2({minimumResultsForSearch:-1}),0!=t.length&&t.select2({allowClear:!0,placeholder:"- Select Country -"});var n=$(".selectpicker");0!=n.length&&n.select2({minimumResultsForSearch:-1})},searchstopPropagation:function(){$(".search--pretty .form-control").on("click",function(){$(this).addClass("form-control--pushed");var e=$(this);$(".profile").one("mouseup",function(){return!1}),$(document).one("mouseup",function(){e.removeClass("form-control--pushed")})})},oNiceScrollbar:function(){$("#post-scroller").niceScroll({styler:"fb",cursorcolor:"rgba(0,0,0,0.2)",cursorwidth:"4",cursorborderradius:"10px",cursorborder:"",zindex:"1000",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1}),$(".modal").niceScroll({autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1}),$("html, .modal").niceScroll({styler:"fb",cursorcolor:"#638694 ",cursorwidth:"6",cursorborderradius:"10px",background:"#d4d4d4",cursorborder:"",zindex:"1000",spacebarenabled:!1,enablekeyboard:!1}),$(".timeline-messages-listing, .list-group--scroll").niceScroll({styler:"fb",cursorcolor:"#95bce4 ",cursorwidth:"7",cursorborderradius:"10px",cursorborder:"",zindex:"1000",spacebarenabled:!1,enablekeyboard:!1}),$(".t-sidebar").niceScroll({styler:"fb",cursorcolor:"rgba(56,83,94,0.3)",cursorwidth:"4",cursorborderradius:"6px",cursorborder:"",zindex:"1015",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1}),$(".media-attachments").niceScroll({styler:"fb",cursorcolor:"#d4d4d4",cursorwidth:"6",cursorborderradius:"6px",cursorborder:"",zindex:"2000",autohidemode:!1,spacebarenabled:!1,enablekeyboard:!1})},oMessageBtn:function(){$(".btn-message-submit").click(function(){$(this).addClass("disabled"),$(".message-submit").show()})},oInputNumber:function(){$(".numbers-row .numbers-sorting-listing").append('<div class="inc number-sorting"><span class="hide">+</span><i class="fa fa-sort-up"></i></div><div class="dec number-sorting"><span class="hide">-</span><i class="fa fa-sort-down"></i></div>'),$(".number-sorting").on("click",function(){var e=$(this),t=e.parent().parent().find("input").val();if("+"==e.text())var n=parseFloat(t)+1;else if(t>0)var n=parseFloat(t)-1;else n=0;e.parent().parent().find("input").val(n)})},oCheckboxDropdown:function(){$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu--extended")&&e.stopPropagation()})},oDatePicker:function(){$("#datetimepicker-from").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}}),$("#datetimepicker-to").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}}),$("#datetimepicker-from").on("change.dp",function(e){$("#datetimepicker-to").data("DateTimePicker").setStartDate(e.date)}),$("#datetimepicker-to").on("change.dp",function(e){$("#datetimepicker-from").data("DateTimePicker").setEndDate(e.date)}),$("#datepicker").datetimepicker({language:"en",pickTime:!1,icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"}}),$(".datetimepicker").datetimepicker({language:"en",pickTime:!0,pick12HourFormat:!0}),$("#datetimepicker2").datetimepicker({language:"en",pickTime:!0,pick12HourFormat:!0})},oMenuDraggable:function(){$(".js-menu-remove").click(function(){$(this).parent.parent(".js-menu-item").hide()}),$(".js-menu-item").hover(function(){$(this).find(".js-menu-remove").toggleClass("js-menu-remove--ease")})}},Loader:{layOpen:function(e){var t=$(e);if(0!=t.length){var n=t.position();n.top,n.left;var r=t.height(),i=t.width(),s=$('<div class="table-overlay"><span class="preloader__brand preloader__brand--fade"></span></div>');t.css({position:"relative"}),t.append(s),s.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",left:"0",width:i+"px",height:r+"px","z-index":"999"}),$(".preloader__brand").css({"margin-top":r/3+"px !important","margin-left":"auto !important","margin-right":"auto !important"})}},layClose:function(){$(".table-overlay").remove()}},AskExpert:{init:function(){this.inbox(),this.attachment(),this.sendForm(),this.pagination(),this.addAttachments(),this.jsAttachItems()},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$("input.attachment").length-1,t=$("input.attachment:eq(0)").clone();t.val("").insertAfter("input.attachment:eq("+e+")")})},jsAttachItems:function(){$(".js-attached-btn").click(function(){$(".js-attached-items").slideDown("fast")})},pagination:function(){$("body").on("click",".post-carousel-pagination__core > .carousel-control",function(e){e.preventDefault();var t=$("#s"),n=$("#per_page");return $.ajax({url:ajaxUrl,type:"GET",dataType:"json",data:{per_page:n.val(),s:t.val(),orderby:$(".desort").data("groupby"),order:$(".desort").data("order"),page:$(this).data("page")},beforeSend:function(){cskMain.Loader.layOpen("#table")},success:function(e){$("#table").replaceWith(e.table),$(".post-carousel-pagination").replaceWith(e.paging),$(".table-overlay").remove()}}),!1})},inbox:function(){$("body").on("click",".item-inbox",function(e){e.preventDefault();var t=$(this).data("id");return $(".item-inbox").removeClass("post--active"),$(this).addClass("post--active"),$.ajax({url:baseURL+"admin/ask-expert/thread",dataType:"json",data:{id:t},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){$(".forum-wrappr").html(e.table),cskMain.Loader.layClose()}}),!1}),$(".item-inbox:eq(0)").trigger("click")},attachment:function(){$("body").on("click",".toggle-attachments",function(e){e.preventDefault();var t=$(this),n=t.data("id");return t.hasClass(":not(.get-attach)")?(_attachmnt_list.slideToggle("slow"),!1):($.ajax({url:baseURL+"inbox/attachments",dataType:"json",data:{id:n},success:function(e){$(".attachments-lists").html(e.attachments).show()}}),!1)})},sendForm:function(){$("body").on("submit",".askexpert-form",function(e){e.preventDefault();var t=$(this),n=$(".wysiwyg-textarea").code(),r=$('input[name^="_token"]').val(),i=$('input[name^="id"]').val(),s=$('input[name^="recommendations"]').val();return $.ajax({url:t.attr("action"),type:"post",dataType:"json",data:{_token:r,message:n,id:i,recommendations:s},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(){cskMain.Loader.layClose(),$(".post--active").trigger("click")},error:function(e,t,n){console.log(e),console.log(t),console.log(n)}}),!1})},oResponsiveNav:function(){$(".navbar-toggle").click(function(){return $(this).toggleClass("navbar-toggle--trigger"),$(".t-sidebar").toggleClass("t-sidebar--pushed"),$("#ascrail2001").toggleClass("nicescroll-rails--pushed"),$("#ascrail2002").toggleClass("nicescroll-rails--pushed"),$("#ascrail2003").toggleClass("nicescroll-rails--pushed"),!1})},oNiceScrollbar:function(){$("#post-scroller").niceScroll({styler:"fb",cursorcolor:"rgba(0,0,0,0.2)",cursorwidth:"4",cursorborderradius:"10px",cursorborder:"",zindex:"1000",autohidemode:!1}),$(".modal").niceScroll({autohidemode:!1}),$("html, .modal").niceScroll({styler:"fb",cursorcolor:"#638694 ",cursorwidth:"6",cursorborderradius:"10px",background:"#d4d4d4",cursorborder:"",zindex:"1000"}),$(".timeline-messages-listing, .list-group--scroll").niceScroll({styler:"fb",cursorcolor:"#95bce4 ",cursorwidth:"7",cursorborderradius:"10px",cursorborder:"",zindex:"1000"}),$(".t-sidebar").niceScroll({styler:"fb",cursorcolor:"rgba(56,83,94,0.3)",cursorwidth:"4",cursorborderradius:"6px",cursorborder:"",zindex:"1015",autohidemode:!1}),$(".media-attachments").niceScroll({styler:"fb",cursorcolor:"#d4d4d4",cursorwidth:"6",cursorborderradius:"6px",cursorborder:"",zindex:"2000",autohidemode:!1})},oMessageBtn:function(){$(".btn-message-submit").click(function(){$(this).addClass("disabled"),$(".message-submit").show()})},oInputNumber:function(){$(".numbers-row .numbers-sorting-listing").append('<div class="inc number-sorting"><span class="hide">+</span><i class="fa fa-sort-up"></i></div><div class="dec number-sorting"><span class="hide">-</span><i class="fa fa-sort-down"></i></div>'),$(".number-sorting").on("click",function(){var e=$(this),t=e.parent().parent().find("input").val();if("+"==e.text())var n=parseFloat(t)+1;else if(t>0)var n=parseFloat(t)-1;else n=0;e.parent().parent().find("input").val(n)})},oCheckboxDropdown:function(){$(".dropdown-menu").on("click",function(e){$(this).hasClass("dropdown-menu--extended")&&e.stopPropagation()})},oMenuDraggable:function(){$(".js-menu-remove").click(function(){$(this).parent.parent(".js-menu-item").hide()}),$(".js-menu-item").hover(function(){$(this).find(".js-menu-remove").toggleClass("js-menu-remove--ease")})}},Loader:{layOpen:function(e){var t=$(e);if(0!=t.length){var n=t.position();n.top,n.left;var r=t.height(),i=t.width(),s=$('<div class="table-overlay"><span class="preloader__brand preloader__brand--fade"></span></div>');t.css({position:"relative"}),t.append(s),s.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",right:"0",width:i+"px",height:r+"px","z-index":"999"}),$(".preloader__brand").css({"margin-top":r/3+"px !important","margin-left":"auto !important","margin-right":"auto !important"})}},layClose:function(){$(".table-overlay").remove()}},AskExpert:{init:function(){this.inbox(),this.attachment(),this.sendForm(),this.pagination(),this.addAttachments(),this.jsAttachItems(),this.getFilename(),this.removeAttachment()},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$(".attachment-btn").length-1,t=$(".attachment-btn:eq(0)").clone();t.find(".filename").text(""),t.find("input").val(""),t.insertAfter(".attachment-btn:eq("+e+")")})},getFilename:function(){$("body").on("change",":file",function(){var e=$(this).val();e=e.length>30?e.substring(0,27)+"...":e,$(this).closest("div").find(".filename").html(e)})},removeAttachment:function(){$("body").on("click",".attachment-btn .fa-trash-o",function(e){e.preventDefault(),0!=$(".attachment-btn").length-1&&$(this).closest(".attachment-btn").remove()})},jsAttachItems:function(){$(".js-attached-btn").click(function(){$(".js-attached-items").slideDown("fast")})},pagination:function(){$("body").on("click",".post-carousel-pagination__core > .carousel-control",function(e){e.preventDefault();var t=$("#s"),n=$("#per_page");return $.ajax({url:ajaxUrl,type:"GET",dataType:"json",data:{per_page:n.val(),s:t.val(),orderby:$(".desort").data("groupby"),order:$(".desort").data("order"),page:$(this).data("page")},beforeSend:function(){cskMain.Loader.layOpen("#table")},success:function(e){$("#table").replaceWith(e.table),$(".post-carousel-pagination").replaceWith(e.paging),$(".table-overlay").remove()}}),!1})},inbox:function(){$("body").on("click",".item-inbox",function(e){e.preventDefault();var t=$(this).data("id");return $(".item-inbox").removeClass("post--active"),$(this).addClass("post--active"),$.ajax({url:baseURL+"ask-expert/thread",dataType:"json",data:{id:t},beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(e){$(".forum-wrappr").html(e.table),cskMain.Loader.layClose()}}),!1}),$(".item-inbox:eq(0)").trigger("click")},attachment:function(){$("body").on("click",".toggle-attachments",function(e){e.preventDefault();var t=$(this),n=t.data("id");return t.hasClass(":not(.get-attach)")?(_attachmnt_list.slideToggle("slow"),!1):($.ajax({url:baseURL+"inbox/attachments",dataType:"json",data:{id:n},success:function(e){$(".attachments-lists").html(e.attachments).show()}}),!1)})},sendForm:function(){$("body").on("submit",".askexpert-form",function(e){e.preventDefault();var t=$(this);return""==t.find(".ckeditor").val()?(bootbox.alert("Message is required"),void 0):($.ajax({url:t.attr("action"),type:"post",dataType:"json",data:t.serialize(),beforeSend:function(){cskMain.Loader.layOpen(".forum-wrappr")},success:function(){cskMain.Loader.layClose(),$(".post--active").trigger("click")},error:function(e,t,n){console.log(e),console.log(t),console.log(n)}}),!1)})}},Comment:{init:function(){var e=$("#post_id");this.comment(),this.getPostComment(e.val())},getPostComment:function(e){cskMain.Loader.layOpen(".timeline-messages-listing"),$.get(baseURL+"post/comment/"+e).done(function(e){$(".timeline-messages").html(e),cskMain.Loader.layClose()},"json")},comment:function(){$("body").on("click","#send-comment",function(){var e=$("#comment"),t=$("#post_id");""!=e.val()&&$.post(baseURL+"post/comment",{comment:e.val(),post_id:t.val()},function(){cskMain.Comment.getPostComment(t.val()),e.val("")},"json")})}}};