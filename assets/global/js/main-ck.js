var globalJs={Global:{init:function(){this.dateTimePicker();this.addAttachments();this.logoutInactive();this.priceFormat();this.ajaxComplete();this.closeLoginPopupModalClose()},ajaxComplete:function(){var e=this;$(document).ajaxComplete(function(t,n,r){if(n.status==200&&typeof n.responseJSON!="undefined"){var i=n.responseJSON;typeof i.status!="undefined"&&i.status=="not_logged_in"&&e._showLoginDialog()}})},_showLoginDialog:function(){var e=this,t=$("#login_popup_modal");t.modal("show")},closeLoginPopupModalClose:function(){$("#login_popup_modal_close").bind("click",function(){$("#login_popup_modal").modal("hide")})},priceFormat:function(e){typeof e=="undefined"&&(e="");var t;typeof e=="object"?t=e.find(".form-group-currency input"):t=$(e+" .form-group-currency input");t.autoNumeric("init",{aSign:"$ ",mDec:0})},dateTimePicker:function(){$(".datetimepicker").datetimepicker({icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-arrow-up",down:"fa fa-arrow-down"},language:"au",showToday:!0,pickTime:!1});$(".datetimepicker").on("dp.change",function(e){$(this).blur()});$(".datetimepicker-from").on("dp.change",function(e){$(".datetimepicker-to").data("DateTimePicker").setMinDate(e.date)});$(".datetimepicker-to").on("dp.change",function(e){$(".datetimepicker-from").data("DateTimePicker").setMaxDate(e.date)})},addAttachments:function(){$("body").on("click",".add-more-attachment",function(){var e=$("input.attachment").length-1;$("input.attachment:eq(0)").clone().insertAfter("input.attachment:eq("+e+")")})},logoutInactive:function(){function t(){e=setInterval("auto_logout()",1e4)}function n(){if(e!=0){clearInterval(e);e=0;e=setInterval("auto_logout()",1e4)}}function r(){window.location=CONST.BASEURL+"/logout/?_token="+CONST._TOKEN+"&is_expired=1"}var e=0;onload="set_interval()";onmousemove="reset_interval()";onclick="reset_interval()";onkeypress="reset_interval()";onscroll="reset_interval()"}},Overlay:{layOpen:function(e){var t=$(e),n=t.position(),r=n.top,i=n.left,s=t.height(),o=t.width(),u=$('<div class="table-overlay"><span class="table-loader"></span></div>');t.css({position:"relative"});t.append(u);u.css({position:"absolute",background:"rgba(255, 255, 255, 0.74)",top:"0",right:"0",width:o+"px",height:s+"px","z-index":"999"});$(".table-loader").css({"margin-top":s/3+"px","margin-left":"auto","margin-right":"auto"})},layClose:function(){$(".table-overlay").remove()}},Comment:{init:function(){var e=$("#post_id");this.comment();this.getPostComment(e.val())},getPostComment:function(e){globalJs.Overlay.layOpen(".timeline-messages-listing");$.get(baseURL+"post/comment/"+e).done(function(e){$(".timeline-messages").html(e);globalJs.Overlay.layClose()})},comment:function(){$("body").on("click","#send-comment",function(){var e=$("#comment"),t=$("#post_id");if(e.val()=="")return;$.post(baseURL+"post/comment",{comment:e.val(),post_id:t.val()},function(n){globalJs.Comment.getPostComment(t.val());e.val("")})})}}};